#!/bin/bash

source $HOME/.color
source $HOME/scripts/git-completion.bash

export PATH=$HOME/bin:$HOME/scripts:/usr/bin:$M2:/usr/local/bin:/usr/local/mysql/bin:$PATH:/usr/sbin:/usr/afsws/bin:/usr/afsws/etc
export PATH=/usr/local/cuda/bin:/usr/local/bin:/opt/local/bin:/opt/local/sbin:$DERBY_INSTALL/bin:$HOME/Software/shell-scripts/dvcs:$PATH
export PATH=$HOME/.cask/bin:$PATH
export DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-7.0/lib:$DYLD_LIBRARY_PATH

export HISTSIZE=10000
export HISTFILESIZE=100000
export HISTFILE=$HOME/.history/myhist


#HISTFILE="${HOME}/.history/$(date -u +%Y/%m/%d.%H.%M.%S)_${HOSTNAME_SHORT}_$$"
HOSTNAME="$(hostname)"
HOSTNAME_SHORT="${HOSTNAME%%.*}"


function gchk() {
    git checkout `git branch -a | sed -e 's/\(.*\/\)//g' | grep $1 | head -n 1`
}

function gbr() {
    git branch -a | sed -e 's/\(.*\/\)//g' | grep $1
}

function gcma() {
    git commit -am "$1"
}

function gp() {
    git push
}

function gs() {
    git status
}

function gd() {
    git diff
}

export EDITOR="emacs -nw"
export PAGER=less
export CVS_RSH=ssh
export PS1="\t/\u/\H\w> "

#For macs sake
update_terminal_cwd() {
    # Identify the directory using a "file:" scheme URL,
    # including the host name to disambiguate local vs.
    # remote connections. Percent-escape spaces.
    local SEARCH=' '
    local REPLACE='%20'
    local PWD_URL="file://$HOSTNAME${PWD//$SEARCH/$REPLACE}"
    printf '\e]7;%s\a' "$PWD_URL"
}



if [ -z $INSIDE_EMACS ]; then
    export PROMPT_COMMAND="update_terminal_cwd; history -a; history -c; history -r; $PROMPT_COMMAND"

else
    export PROMPT_COMMAND="history -a; history -c; history -r"
fi
shopt -s histappend

export PYTHONPATH=$PYTHONPATH:$HOME/RedHawk

export MAVEN3_HOME=/opt/local/share/java/maven3
export M3=$MAVEN3_HOME/bin
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home
export MAVEN_OPTS='-Xmx1024m'
export DERBY_INSTALL=~/Tools/db-derby-10.9.1.0-bin
export CLASSPATH=$CLASSPATH:~/Library/Java/bsh.jar:$DERBY_INSTALL/lib/derby.jar:$DERBY_INSTALL/lib/derbytools.jar:$WORKSPACE/database/drivers
export ANT_OPTS="-Xmx512m -XX:MaxPermSize=256m"

export BLOOM_DIR=/Users/home
export JS=$BLOOM_DIR/javascript

export K8S_VERSION="v1.2.4"
export GOOS="darwin"
export GOARCH="amd64"
export K8S_BINARY="kubectl"

alias e="emacs -nw"

#Node
export NODE_PATH=/Users/home/:$HOME/workspace:$JS

#Cuda
export CUDA_ROOT=/usr/local/cuda

alias e="emacs -nw"
alias ec="emacsclient -t"

function gpersonal() {
    #Git
    git config user.name "Seth Lakowske"
    git config user.email lakowske@gmail.com
}

#Mac specific docker config
function dockerEnv() {
    eval $(docker-machine env default)
}

dockerEnv

#include work configuration if it exists
WORKBASHRC=$HOME/workScripts/workBashrc.sh
if [ -e $WORKBASHRC ]; then
    source $WORKBASHRC
fi

# The next line updates PATH for the Google Cloud SDK.
source '/Users/slakowske/Tools/google-cloud-sdk/path.bash.inc'

# The next line enables shell command completion for gcloud.
source '/Users/slakowske/Tools/google-cloud-sdk/completion.bash.inc'
